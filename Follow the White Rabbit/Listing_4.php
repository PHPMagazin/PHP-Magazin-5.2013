try {  // set up Composer autoloader  $loader = require_once (__DIR__.'/vendor/autoload.php');  // initialize PHPCR session to Magnolia's 'dms' repository  $prm = array(    'jackalope.jackrabbit_uri' => 'http://localhost:8080/magnoliaAuthor/.davex/'  );  $creds = new \PHPCR\SimpleCredentials('superuser', 'superuser');  $repository = \Jackalope\RepositoryFactoryJackrabbit::getRepository($prm);  $dms = $repository->login($creds, 'dms');  // get a binary data node from the repository as a stream and have the browser download it as a file  $node_string = '/demo-project/downloads/Magnolia_Flyer_4-0';  $node = $dms->getNode($node_string);  $properties = $node->getNode('document')->getPropertiesValues();  header('Content-type: ' . $properties['jcr:mimeType']);  header('Content-disposition: attachment; filename="' . $properties['fileName'] . '.' . $properties['extension'] . '"');  echo stream_get_contents($properties['jcr:data']);  // clean up  // clean up  unset($website);} catch(Exception $e) {  echo $e->getTraceAsString();}
