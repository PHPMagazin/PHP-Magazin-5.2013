<?php  try {  // set up autoloader  $loader = require_once (__DIR__.'/vendor/autoload.php');  // initialize PHPCR session to Magnolia's 'website' repository  $prm = array(    'jackalope.jackrabbit_uri' =>    'http://localhost:8080/magnoliaAuthor/.davex/'  );  $creds = new \PHPCR\SimpleCredentials('superuser', 'superuser');  $repository = \Jackalope\RepositoryFactoryJackrabbit::getRepository($prm);  $website = $repository->login($creds, 'website');?><html>  <head></head>  <body>    <h1>Magnolia CMS Page Abstract Editor</h1>    <form method="post" action="">    <?php      if (!isset($_POST['submit'])) {        $qm = $website->getWorkspace()->getQueryManager();        // get 5 page nodes with abstracts use a JCR-SQL2 query        $sql = "SELECT * FROM [mgnl:page] WHERE ISDESCENDANTNODE('/demo-project') AND abstract IS NOT NULL ORDER BY [jcr:uuid]";        $query = $qm->createQuery($sql, 'JCR-SQL2');        $query->setLimit(5);        $queryResult = $query->execute();        // for each node, display a form input field with node UUID        // as hidden field        foreach ($queryResult->getNodes() as $node) {          $abstract = $node->getProperty('abstract');          ?>          <p>            <strong><?php echo $node->getPath(); ?></strong> <br/>              (uuid: <?php echo $node->getIdentifier(); ?>) <br/>              <textarea rows="5" cols="50" name="ids[<?php echo $node->getIdentifier(); ?>]">              <?php echo trim($abstract->getValue());?></textarea>          </p>        <?php        }        ?>      <input type="submit" name="submit" />    <?php    } else {      // get node by UUID and write new abstract      foreach ($_POST['ids'] as $key => $value) {        $node = $website->getNodebyIdentifier($key);        $node->setProperty('abstract', $value);      }      $website->save();      echo 'Node content saved successfully';    }    ?>    </form>  </body></html><?php  } catch(Exception $e) {    echo $e->getTraceAsString();  }?>